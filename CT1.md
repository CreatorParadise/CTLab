# 计算机如何进行通信
当你用微信和朋友聊天时、当你用浏览器浏览网页时，实际上你的手机或电脑与远端的计算机建立了通信连接，并在这个连接上传送数据，比如文字、图片信息等等。但有没有想过，你的手机或电脑到底是如何获得这些信息的？ 是如何保证这些信息在传输的过程中不会出差错？互联网经常会使用TCP进行通信，TCP是一种通信协议，它规定了具体该如何进行通信。我们则以TCP通信方式传送图片信息为例，一起探究常用通信过程的原理和方法。



现在假设有两个人（两台计算机）甲和乙，甲希望传送一张图片给乙。



![](https://github.com/CreatorParadise/CTLab/raw/master/pic/CT1/p1.png)

现在他们建立了一条通信连接，首先想到的方法是直接把图片的所有数据都塞进这条连接里传送给乙，但实际上这通常是做不到的，因为一张图片数据往往比较多，无法直接一次性传送，一次传送数据的多少是有限制的，一般为1500字节，而一张图片往往达到了几百K。因此，需要把图片拆分成很多份，然后一份一份地进行传送过去，每一份数据都称为一份**数据包**。

![](https://github.com/CreatorParadise/CTLab/raw/master/pic/CT1/p2.png)

但因为网络常常会出现不稳定的情况，不能保证所有的数据都能一一到达，也就是会出现丢包的情况。

![一种典型的丢包情形](https://github.com/CreatorParadise/CTLab/raw/master/pic/CT1/p3.png)

所以我们传送的图片也许会有几块丢失了

![](https://github.com/CreatorParadise/CTLab/raw/master/pic/CT1/p3.png)

想想我们在跟其他人聊天时，或者老师给同学们发重要通知时，都会希望对方能够收到，并且能够让自己知道对方已经收到了，就像发通知时经常会附带“收到已回复”，这样就能保证对方收到了信息。是不是可以在TCP通信中也使用这种机制呢？

![](http://wx1.sinaimg.cn/large/ceeb653ely1fpp2qv5yu4j205g05bmx3.jpg)

于是，在TCP中，就有了**确认包**的概念。确认包的作用就是让乙（接收方）能够告诉甲（发送方）自己正确接收到了数据。乙每接收到一份数据，就会给甲回送一份确认包。

![](https://github.com/CreatorParadise/CTLab/raw/master/pic/CT1/p4.png)

而甲如果迟迟收不到乙发送的确认包，就会认为传送的该份数据丢失了，会再次传送一遍，也就是超时重传机制。

![](https://github.com/CreatorParadise/CTLab/raw/master/pic/CT1/p5.png)

通过确认机制和超时重传机制，就能保证数据传输的可靠性了。

我们知道，TCP连接不仅可以传输图片数据，还可以传输像文字、视频、语音等各种其他类型的数据。这些数据都可以理解为数据流，数据流有起点有终点，且可任意进行分割，就像前面我们将图片任意分割为几份小的数据包进行传送，而TCP通信实际上就是在可靠地传输整个数据流，也称为**基于数据流的可靠通信**。

TCP通信在互联网通信上已经得到了非常广泛的应用，不关是微信聊天、QQ聊天、网页浏览、淘宝购物，都会用到TCP协议进行通信，可谓是互联网的技术基石。

